<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Backgrounds - Helgnar Site</title>
    <link rel="stylesheet" href="./css/style.css">
    <style>
        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            z-index: 9999;
            max-width: 300px;
        }
        .debug-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #ff6b35;
            background: rgba(255,107,53,0.1);
        }
        .test-bg {
            width: 100%;
            height: 200px;
            border: 2px solid #fff;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="debug-info" id="debug-info">
        <div><strong>WebP Support:</strong> <span id="webp-status">Checking...</span></div>
        <div><strong>HTML Classes:</strong> <span id="html-classes">-</span></div>
        <div><strong>Background Test:</strong> <span id="bg-test">-</span></div>
    </div>

    <div class="debug-section">
        <h2>Hero Section Test</h2>
        <div class="hero test-bg">
            <p>Hero background should be visible here</p>
        </div>
    </div>

    <div class="debug-section">
        <h2>Media Section Test</h2>
        <div class="media test-bg">
            <p>Media background should be visible here</p>
        </div>
    </div>

    <div class="debug-section">
        <h2>Contacts Section Test</h2>
        <div class="contacts test-bg">
            <p>Contacts background should be visible here</p>
        </div>
    </div>

    <div class="debug-section">
        <h2>About Backgrounds Test</h2>
        <div class="about-bg-1 test-bg">
            <p>About background 1 should be visible here</p>
        </div>
        <div class="about-bg-2 test-bg">
            <p>About background 2 should be visible here</p>
        </div>
    </div>

    <script>
        // WebP Support Detection (same as main.js)
        let webPSupportCache = null;
        
        function checkWebPSupport() {
            if (webPSupportCache !== null) {
                return Promise.resolve(webPSupportCache);
            }
            
            return new Promise((resolve) => {
                const webP = new Image();
                webP.onload = webP.onerror = () => {
                    webPSupportCache = webP.height === 2;
                    resolve(webPSupportCache);
                };
                webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
            });
        }

        // Update debug info
        async function updateDebugInfo() {
            const supportsWebP = await checkWebPSupport();
            const htmlClasses = document.documentElement.className;
            
            // Add appropriate class
            if (supportsWebP) {
                document.documentElement.classList.add('webp');
            } else {
                document.documentElement.classList.add('no-webp');
            }
            
            // Update debug display
            document.getElementById('webp-status').textContent = supportsWebP ? '✅ Supported' : '❌ Not Supported';
            document.getElementById('html-classes').textContent = document.documentElement.className;
            
            // Test background loading
            const hero = document.querySelector('.hero');
            const computedStyle = window.getComputedStyle(hero);
            const bgImage = computedStyle.backgroundImage;
            
            document.getElementById('bg-test').textContent = bgImage.includes('url') ? '✅ Loaded' : '❌ Not Loaded';
            
            console.log('WebP Support:', supportsWebP);
            console.log('HTML Classes:', document.documentElement.className);
            console.log('Hero Background:', bgImage);
        }

        // Run on load
        document.addEventListener('DOMContentLoaded', updateDebugInfo);
        
        // Also run after a delay to catch any async loading
        setTimeout(updateDebugInfo, 1000);
    </script>
</body>
</html>
